### 11. 메일의 안정성을 높이다.(PSG, S/MIME, SMTP over SSL, POP over SSL)

#### 메일을 암호화한다.
- 전자메일을 송수신 할 떄 두가지 프로토콜을 사용한다.
  - SMTP(Simple Mail Transfer Protocol)
    - 메일 송신시 사용하는 프로토콜
  - POP(Post Office Protocol)
    - 메일 수신시 사용하는 프로토콜
- 일반적으로 SMTP, POP은 평문 그대로 암호화 없이 전송이되고 있다.
- 따라서 도청 및 위, 변조 등이 기술적으로 가능한 상태이다.
- 그래서 메일을 암호화하는 방법은 지금까지 두가지가 있다.
  - PGP(Pretty Good Privacy)
  - S/MIME(Secure Multipurpose Internet Mail Extensions)
- PGP, S/MIME는 모두 공개키 암호를 이용한 암호화와 전자 서명을 사용할 수 있다.
- 따라서 도청을 방지할 수 있고 송신자를 확실하게 확인할 수 있으며 내용이 변조되지 않았다는 것을 확인할 수 있다.
- 그러나 송신자와 수신자 모두 PGP S/MIME를 사용하고 있어야 한다.
- 게다가 S/MIME는 인증기관으로부터 인증서를 발급 받야아 하므로 절차가 복잡할 뿐만 아니라 비용도 소요된다.

#### 통신경로를 암호화한다.
- 웹 사이트 조회에 사용되는 HTTPS와 마찬가지로 통신 경로에서 메일을 암호화하는 방법은 두가지가 있다.
  - SMTP over SSL
  - POP over SSL
- SMTP over SSL을 사용하면 "송신자"와 "송신자의 메일서버" 구간에서 통신이 암호화된다.
- POP over SSL을 사용하면 "수신자의 메일서버"와 "수신자"구간에서 통신이 암호화된다.
- 송신 메일서버와 수신 메일서버 사이의 구간에서 통신이 암호화되지 않기 때문에 지금까지는 대중적으로 사용되지 않았다.
- 그러나 최근 Gmail 등의 메일서버가 지원하고 있으며, SMTP over SSL과 POP over SSL을 사용하면 지금까지 회사 내부의 암호화 범위를 벗어난 통신 경로도 암호화가 보장되어 급격하게 도입이 확산되고 있다.
- 또한 S/MIME처럼 개별적으로 인증서를 발급할 필요도 없다.

#### SMTP over SSL과 POP over SSL의 암호화 범위
- 송신의 경우
  1. 송신자(SMTP over SSL 전송)
  2. 송신자의 메일 서버(SMTP 암호화 전송)
  3. Gmail 등의 메일서버(HTTPS 웹메일 수신자에게 전송)
  4. 수신자
- 수신의 경우
  1. 송신자(HTTPS 웹메일 수신자에게 전송)
  2. Gmail 등의 메일서버(SMTP 암호화 전송)
  3. 수신자의 메일 서버(POP over SSL)
  4. 수신자

#### Point
- 지금까지 전자메일 암호화 방법으로 PGP와 S/MIME이 사용되고 있었는데, 송신자와 수신자 모두가 PGP와 S/MIME을 사용해야만 가능했다.
- 통신 경로에서 암호화하는 방법으로 SMTP over SSL과 POP over SSL이 사용되기 시작했고, 적용하는 메일 서버들도 지속적으로 늘어나고 있다.

### 12. 원격에서 안전한 통신을 실현(SSH, 클라이언트 인증서, VPN, IPsec)

#### 네트워크를 경유하여 서버와 안전하게 통신한다.
- 떨어져 있는 장소에서 서버 작업을 할 때, 네트워크를 경유해서 안전하게 통신하기 위한 프로토콜인 SSH(Secure Shell)가 있다.
- 서버에서 로그인하여 명령어를 실행하거나 다른 컴퓨터로 파일을 복사할 때 사용된다.
- 기밀성을 확보해야하는 경우 SSH를 사용하여 통신 데이터를 암호화하는 것이다.
- SSH를 통해 서버의 인증 뿐만 아니라 이용자의 인증을 실시한다.
- SSH로 이용자를 인증하는 방법에는 패스워드 인증과 공개키 인증 등이 있으며 두가지를 조합하여 사용할 수 있다.
- 이 공개키 인증에 사용되는 인증서를 클라이언트 인증서 라고 한다.
- 한번 설정하면 패스워드 인증이 불필요하여 편리하게 사용할 수 있다.
- 그러나 권한을 가지고 있는 사람이라도 인증서가 등록되어 있지 않은 컴퓨터에서 접속할 수 없다.

#### 인터넷을 통해 안전하게 회사 내부로 접속하려면
- 외출을 나간 장소에서 회사 내부로 접속하고자 하는 경우에는 원격지에서 인터넷을 통해 접속하게 되는데 이때 안전한 통신을 해야한다.
- VPN
  - 암호화 기술을 이용하여 가상의 전용선과 같은 안전한 통신 회선을 구현하는 것
- 인터넷을 경유할 때 VPN을 구현하기 위한 프로토콜
  - 혼틈 TCP/IP
    - 네트워크 접근계층(하위) - 인터넷 계층(IP) - 전송계층(TCP/UDP) - 응용계층(상위)
  - SSL-VPN
    - TCP 레벨에서 암호화
    - SSL은 웹 브라우저 등 많은 소프트웨어에 탑재되어 있기 때문에 SSL-VPN은 전용 소프트웨어를 설치하지 않아도 간편하게 시작할수 있다.
    - 그러나 SSL은 웹 브라우저 등 특정 어플리케이션으로만 암호화하기 때문에 범용적이지 않다.
  - IPsec
    - IP레벨에서 암호화
    - IPsec은 인터넷 계층 프로토콜이므로 상위 계층인 어플리케이션 계층은 암호화를 고려할 필요가 없으며 범용적으로 통신을 암호화할 수 있다.

#### Point
- 명령어 입력이나 파일 전송을 암호화하는 방법으로 SSH가 많이 사용되고 있다.
- 외부 출장지에서 회사 내부로 접속하는 통신을 암호화하기 위해 VPN이 사용되고 있으며, 인터넷을 경유하는 방법으로 SSL-VPN이나 IPsec이 많이 사용되고 있다.

### 13. 프로그램에도 설명한다.

#### 소프트웨어의 디지털 서명
- 소프트웨어 개발 환경이 마련되면 누구나 개발할 수 있으며 동일한 이름의 소프트웨어를 만드는 것도 간단하다.
- 온라인으로 소프트웨어를 취득할 수 있어 편리해진 반면, 기존의 소프트웨어를 위, 변조하여 악성코드를 포함시키거나, 정품 공급업채로 위장하여 가짜로 배포하는 사례가 끊이지 않는다.
- 코드서명 인증서
  - 사용자를 보호하기 위해 출처에 대한 인증과 사칭 및 내용의 위, 변조 등이 발생하지 않았다는 것을 보장하기 위해 사용
  - 해당 인증서를 사용하여 소프트웨어에 디지털 서명을 함으로, 정품이 아닌 경우 다운로드할 때 또는 프로그램을 실행할 때 경고 메시지를 표시되도록 한다.
- 이렇게 사용되는 디지털 서명을 "코드 서명"이라고 부른다.

#### 날짜를 증명하는 "타임 스탬프"
- 전자 서명을 추가하면 전자 문서를 작성한 사람이나 그 내용을 증명할 수 있다.
- 그러나 여기에 증명할 수 있는 것은 "누가", "무엇을" 한 것인가 에 대한 것 뿐이다.
- 즉 전자문서가 "언제" 작성된 것인지 입증할 수 없다.
- 예를 들어, 기업이 특허를 신청하는 경우 "발명 시기"는 매우 중요하다.
- 어떤 기록을 남겨두고 그 시점에 이미 발명하고 되었다는 것을 증명해야 한다.
- 즉, 전자문서가 작성된 일시를 증명하지 않으면 안된다.
- 타임 스탬프
  - 위에서 설명했던 문제를 해결하는 방법
  - 존재증명(어느 시각에 그 문서가 존재하고 있었다.)과 무결성 증명(그 문서는 위조되지 않았다.)를 위해 사용된다.

#### 타임스탬프와 전자서명으로 증명할 수 있는것
- 4대 증거
  - 언제
  - 어디에서
  - 무엇을
  - 누가
- 타임스탬프의 경우
  - 언제, 무엇을 증명가능
- 전자서명의 경우
  - 무엇을, 누가를 증명가능

#### Point
- 소프트웨어의 공급처를 인증하고 위, 변조 등이 이루어지고 있지 않다는 것을 증명하기 위헤 코드 서명이 이용된다.
- 타임 스탬프를 사용함으로써, 전자 문서가 언제 생성된 것인지 증명할 수 있다.
- 타임 스탬프에 의해 존재 증명과 완전성 증명이 가능하다.

### 14. 데이터 송수신 중개에 개입하는 공격자
#### 송신자와 수신자 모두가 속아버리는 "중간자 공격"이란?
- 암호 방식을 설명할때 언급되는 중간자 공격이 드디어 나옴
- 공개키 암호를 사용하면 통신 경로에서 내용이 암호화되고 기밀정보를 안전하게 전송할 수 있게 된다.
- 중간자 공격(MITM : Man-In-The-Middle attact)
  - 3자가 통신 사이에 개입함으로써 암호화된 데이터를 읽어낼 수 있는 방법
  - 예시
    - A와 B가 통신하려고 할 때 공격자가 사이에 들어간다.
    - A는 B와 통신한다고 생각, B도 A와 통신한다고 생각하지만 실제로 서로 공격자와 통신을 하고 있음
  - 중간자 공격을 방지하려면 통신 상대가 발행하는 인증서 내용을 확인하는 것이 효과적
  - EV SSL인증서를 사용하는 방법이 있다.

#### 중간자 공격이 성립하는 절차
- 어떻게 중간자 공격이 성공하게 되는걸까
  1. A가 B에게 정보를 보낼 때, A는 B의 공개키로 암호화 하려고 한다.
  2. 이것을 알고 있는 공격자는 사이에 끼어 양쪽을 모두 사칭하여 공격자 자신의 공개키를 A에게 보낸다.
  3. A는 공격자의 공개키를 B의 공개키라고 착각하게 된다.
  4. A가 이 공개키로 데이터를 암호화해서 송신하면 공격자는 자신의 비밀키로 복호화한다.
  5. 공격자는 데이터 내용을 확인한 후에 B의 공개키로 암호하하고 아무것도 없었던 것처럼 B에게 보낸다.
- B는 자신의 비밀키로 복호화하여 수신한 내용을 확인할 수 있지만, 실제로는 공격자에 의해 도청도고 있다.
- 도청 뿐만 아니라 공격자가 내용을 수정하여 B에게 보낼 수 있다.
- 보낸 내용과 받은 내용이 변해 있어도 송 수신자인 A, B 모두 눈치를 챌 수 없다.

#### Point
- 공개키 암호를 사용하면 통신 경로를 암호화할 수 있지만, 중간자 공격에 의해 제 3자가 데이터를 읽어내는 것이 가능하게 된다.
- 중간자 공격 방지는 인증서 확인이 유효한 수단이며, EV SSL인증서를 사용하여 주소 표시줄의 모양을 바꾸는 것은 효과적인 대책이다.